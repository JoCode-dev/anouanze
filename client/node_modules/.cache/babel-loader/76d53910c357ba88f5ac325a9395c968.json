{"ast":null,"code":"import _asyncToGenerator from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState,useContext}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{chooseParoisse,unchooseParoisse}from\"../../actions/paroisse\";import{UidContext}from\"../AppContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChooseButton=function ChooseButton(_ref){var paroisse=_ref.paroisse;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isChoosen=_useState2[0],setIsChoosen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),onLoading=_useState4[0],setOnLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isParoissed=_useState6[0],setIsParoissed=_useState6[1];var uid=useContext(UidContext);var dispatch=useDispatch();var user=useSelector(function(state){var _state$user;return(_state$user=state.user)===null||_state$user===void 0?void 0:_state$user.user;});var Pid=paroisse===null||paroisse===void 0?void 0:paroisse._id;var choose=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setOnLoading(true);_context.next=3;return dispatch(chooseParoisse(Pid,uid));case 3:setIsChoosen(true);setOnLoading(false);window.location.reload();case 6:case\"end\":return _context.stop();}}},_callee);}));return function choose(){return _ref2.apply(this,arguments);};}();var unChoose=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setOnLoading(true);_context2.next=3;return dispatch(unchooseParoisse(Pid,uid));case 3:setIsChoosen(false);setOnLoading(false);window.location.reload();case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function unChoose(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(paroisse!==null&&paroisse!==void 0&&paroisse.paroissiens.includes(uid)){setIsChoosen(true);setIsParoissed(true);}if((user===null||user===void 0?void 0:user._paroisse)!==undefined&&!paroisse.paroissiens.includes(uid)){setIsChoosen(true);setIsParoissed(false);}if((user===null||user===void 0?void 0:user._paroisse)===\"\"||(user===null||user===void 0?void 0:user._paroisse)===undefined){setIsChoosen(false);setIsParoissed(false);}},[paroisse]);var otherParoisseChoosen=function otherParoisseChoosen(){if(uid!==undefined&&isChoosen===true&&isParoissed===false){return/*#__PURE__*/_jsxs(\"button\",{className:\"choose-paroisse-container\",onClick:function onClick(){return alert(\"Une paroisse est déjà selectionnée\");},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Une autre paroisse a d\\xE9ja \\xE9t\\xE9 choisie\"}),\" \",/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/imgs/icons/love.png\",alt:\"heart\"}),onLoading===true&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-spinner fa-spin\"})]});}};return/*#__PURE__*/_jsxs(\"div\",{children:[uid!==undefined&&isChoosen===true&&isParoissed===true&&/*#__PURE__*/_jsxs(\"button\",{className:\"choose-paroisse-container\",onClick:function onClick(){return unChoose();},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Paroisse choisie\"}),\" \",/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/imgs/icons/love.png\",alt:\"heart\"}),onLoading===true&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-spinner fa-spin\"})]}),otherParoisseChoosen(),uid!==undefined&&isChoosen===false&&/*#__PURE__*/_jsxs(\"button\",{className:\"choose-paroisse-container\",onClick:function onClick(){return choose();},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Choisir comme ma paroisse\"}),\" \",/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/imgs/icons/love.png\",alt:\"heart\"}),onLoading===true&&/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-spinner fa-spin\"})]})]});};export default ChooseButton;","map":{"version":3,"names":["React","useEffect","useState","useContext","useDispatch","useSelector","chooseParoisse","unchooseParoisse","UidContext","ChooseButton","paroisse","isChoosen","setIsChoosen","onLoading","setOnLoading","isParoissed","setIsParoissed","uid","dispatch","user","state","Pid","_id","choose","window","location","reload","unChoose","paroissiens","includes","_paroisse","undefined","otherParoisseChoosen","alert","process","env","PUBLIC_URL"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/components/Paroisse/ChooseButton.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { chooseParoisse, unchooseParoisse } from \"../../actions/paroisse\";\nimport { UidContext } from \"../AppContext\";\n\nconst ChooseButton = ({ paroisse }) => {\n  const [isChoosen, setIsChoosen] = useState(false);\n  const [onLoading, setOnLoading] = useState(false);\n  const [isParoissed, setIsParoissed] = useState(false);\n  const uid = useContext(UidContext);\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.user?.user);\n\n  const Pid = paroisse?._id;\n\n  const choose = async () => {\n    setOnLoading(true);\n    await dispatch(chooseParoisse(Pid, uid));\n    setIsChoosen(true);\n    setOnLoading(false);\n    window.location.reload();\n  };\n\n  const unChoose = async () => {\n    setOnLoading(true);\n    await dispatch(unchooseParoisse(Pid, uid));\n    setIsChoosen(false);\n    setOnLoading(false);\n    window.location.reload();\n  };\n\n  useEffect(() => {\n    if (paroisse?.paroissiens.includes(uid)) {\n      setIsChoosen(true);\n      setIsParoissed(true);\n    }\n\n    if (user?._paroisse !== undefined && !paroisse.paroissiens.includes(uid)) {\n      setIsChoosen(true);\n      setIsParoissed(false);\n    }\n\n    if (user?._paroisse === \"\" || user?._paroisse === undefined) {\n      setIsChoosen(false);\n      setIsParoissed(false);\n    }\n  }, [paroisse]);\n\n  const otherParoisseChoosen = () => {\n    if (uid !== undefined && isChoosen === true && isParoissed === false) {\n      return (\n        <button\n          className=\"choose-paroisse-container\"\n          onClick={() => alert(\"Une paroisse est déjà selectionnée\")}\n        >\n          <p>Une autre paroisse a déja été choisie</p>{\" \"}\n          <img\n            src={process.env.PUBLIC_URL + \"/imgs/icons/love.png\"}\n            alt=\"heart\"\n          />\n          {onLoading === true && <i className=\"fa fa-spinner fa-spin\"></i>}\n        </button>\n      );\n    }\n  };\n\n  return (\n    <div>\n      {uid !== undefined && isChoosen === true && isParoissed === true && (\n        <button\n          className=\"choose-paroisse-container\"\n          onClick={() => unChoose()}\n        >\n          <p>Paroisse choisie</p>{\" \"}\n          <img\n            src={process.env.PUBLIC_URL + \"/imgs/icons/love.png\"}\n            alt=\"heart\"\n          />\n          {onLoading === true && <i className=\"fa fa-spinner fa-spin\"></i>}\n        </button>\n      )}\n\n      {otherParoisseChoosen()}\n      {uid !== undefined && isChoosen === false && (\n        <button className=\"choose-paroisse-container\" onClick={() => choose()}>\n          <p>Choisir comme ma paroisse</p>{\" \"}\n          <img\n            src={process.env.PUBLIC_URL + \"/imgs/icons/love.png\"}\n            alt=\"heart\"\n          />\n          {onLoading === true && <i className=\"fa fa-spinner fa-spin\"></i>}\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ChooseButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}