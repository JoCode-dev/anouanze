{"ast":null,"code":"import _objectSpread from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{login}from\"../../../actions/auth\";import{GoogleLogin}from\"@react-oauth/google\";import jwtDecode from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignInForm=function SignInForm(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.message;}),message=_useSelector.message;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch(login(userData,false));case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var googleSuccess=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){var decoded,googleUser,bool;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:decoded=jwtDecode(res.credential);googleUser={email:decoded===null||decoded===void 0?void 0:decoded.email,password:decoded===null||decoded===void 0?void 0:decoded.sub,confirmPassword:decoded===null||decoded===void 0?void 0:decoded.sub,name:decoded===null||decoded===void 0?void 0:decoded.given_name,lastName:decoded===null||decoded===void 0?void 0:decoded.family_name};setUserData(_objectSpread(_objectSpread({},userData),{},{email:decoded===null||decoded===void 0?void 0:decoded.email,password:decoded===null||decoded===void 0?void 0:decoded.sub}));bool=true;dispatch(login(googleUser,bool));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function googleSuccess(_x2){return _ref2.apply(this,arguments);};}();var googleFailure=function googleFailure(error){};return/*#__PURE__*/_jsxs(\"div\",{className:\"sign-in-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Heureux de vous revoir !\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quidem quas maiores nisi.\"})]}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,name:\"email\",id:\"email\",className:\"input-form\",value:userData.email,onChange:function onChange(e){return setUserData(_objectSpread(_objectSpread({},userData),{},{email:e.target.value}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputs-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Mot de Passe\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,name:\"password\",id:\"password\",className:\"input-form\",value:userData.password,onChange:function onChange(e){return setUserData(_objectSpread(_objectSpread({},userData),{},{password:e.target.value}));}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"inputs-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Connexion\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:message})}),/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:googleSuccess,onError:googleFailure})]})]});};export default SignInForm;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","login","GoogleLogin","jwtDecode","SignInForm","email","password","userData","setUserData","dispatch","state","message","handleSubmit","e","preventDefault","googleSuccess","res","decoded","credential","googleUser","sub","confirmPassword","name","given_name","lastName","family_name","bool","googleFailure","error","target","value"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/components/Login/Forms/SignInForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { login } from \"../../../actions/auth\";\nimport { GoogleLogin } from \"@react-oauth/google\";\nimport jwtDecode from \"jwt-decode\";\n\nconst SignInForm = () => {\n  const [userData, setUserData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const dispatch = useDispatch();\n  const { message } = useSelector((state) => state.message);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    dispatch(login(userData, false));\n  };\n\n  const googleSuccess = async (res) => {\n    const decoded = jwtDecode(res.credential);\n    const googleUser = {\n      email: decoded?.email,\n      password: decoded?.sub,\n      confirmPassword: decoded?.sub,\n      name: decoded?.given_name,\n      lastName: decoded?.family_name,\n    };\n\n    setUserData({ ...userData, email: decoded?.email, password: decoded?.sub });\n\n    const bool = true;\n    dispatch(login(googleUser, bool));\n  };\n  const googleFailure = (error) => {\n  };\n\n  return (\n    <div className=\"sign-in-container\">\n      <div className=\"header-container\">\n        <h1>Heureux de vous revoir !</h1>\n        <p>\n          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quidem quas\n          maiores nisi.\n        </p>\n      </div>\n      <form action=\"\" onSubmit={handleSubmit}>\n        <div className=\"inputs-group\">\n          <label htmlFor=\"email\">Email</label>\n          <br />\n          <input\n            type=\"email\"\n            required\n            name=\"email\"\n            id=\"email\"\n            className=\"input-form\"\n            value={userData.email}\n            onChange={(e) =>\n              setUserData({ ...userData, email: e.target.value })\n            }\n          />\n        </div>\n        <div className=\"inputs-group\">\n          <label htmlFor=\"password\">Mot de Passe</label>\n          <br />\n          <input\n            type=\"password\"\n            required\n            name=\"password\"\n            id=\"password\"\n            className=\"input-form\"\n            value={userData.password}\n            onChange={(e) =>\n              setUserData({ ...userData, password: e.target.value })\n            }\n          />\n        </div>\n        <div className=\"inputs-group\">\n          <input type=\"submit\" value=\"Connexion\" />\n        </div>\n        <div>\n          <p className=\"error\">{message}</p>\n        </div>\n\n        <GoogleLogin onSuccess={googleSuccess} onError={googleFailure} />\n      </form>\n    </div>\n  );\n};\n\nexport default SignInForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}