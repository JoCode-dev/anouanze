{"ast":null,"code":"import _asyncToGenerator from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{isEmpty}from\"../utils/index\";import{getDemandsByParoisse,updateDemande}from\"../../actions/demandes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DemandesBoard=function DemandesBoard(){var dispatch=useDispatch();var user=useSelector(function(state){return state.user.user;});useEffect(function(){dispatch(getDemandsByParoisse(user._paroisse));},[dispatch]);var demands=useSelector(function(state){return state.demandes.data;});!isEmpty(demands)&&demands.filter(function(demand){return demand.isValid===false;});var checkDemand=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(updateDemande(id)).then(function(){return dispatch(getDemandsByParoisse(user._paroisse));});case 2:case\"end\":return _context.stop();}}},_callee);}));return function checkDemand(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"mod-demandes-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Demandes de Messe\"}),!isEmpty(demands)?/*#__PURE__*/_jsx(\"div\",{className:\"list-demandes\",children:demands.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"list-demandes-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list-demandes-left\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Demandeur : \",item.name]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Intention\"}),/*#__PURE__*/_jsx(\"h3\",{children:item.textDemand})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-demandes-right\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.isValid,onClick:function onClick(){return checkDemand(item._id);}})})]});})}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Aucune demande en attente\"})})]});};export default DemandesBoard;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","isEmpty","getDemandsByParoisse","updateDemande","DemandesBoard","dispatch","user","state","_paroisse","demands","demandes","data","filter","demand","isValid","checkDemand","id","then","map","item","index","name","textDemand","_id"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/components/ModDashboard/DemandesBoard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { isEmpty } from \"../utils/index\";\n\nimport { getDemandsByParoisse, updateDemande } from \"../../actions/demandes\";\n\nconst DemandesBoard = () => {\n  const dispatch = useDispatch();\n  const user = useSelector((state) => state.user.user);\n\n  useEffect(() => {\n    dispatch(getDemandsByParoisse(user._paroisse));\n  }, [dispatch]);\n\n  let demands = useSelector((state) => state.demandes.data);\n  !isEmpty(demands) && demands.filter((demand) => demand.isValid === false);\n\n  const checkDemand = async (id) => {\n    await dispatch(updateDemande(id)).then(() =>\n      dispatch(getDemandsByParoisse(user._paroisse))\n    );\n  };\n\n  return (\n    <div className=\"mod-demandes-container\">\n      <h1>Demandes de Messe</h1>\n\n      {!isEmpty(demands) ? (\n        <div className=\"list-demandes\">\n          {demands.map((item, index) => {\n            return (\n              <div className=\"list-demandes-item\">\n                <div className=\"list-demandes-left\">\n                  <h3>Demandeur : {item.name}</h3>\n                  <h2>Intention</h2>\n                  <h3>{item.textDemand}</h3>\n                </div>\n                <div className=\"list-demandes-right\">\n                  <input\n                    type=\"checkbox\"\n                    checked={item.isValid}\n                    onClick={() => checkDemand(item._id)}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        <div>\n          <h2>Aucune demande en attente</h2>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DemandesBoard;\n"],"mappings":"2QAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,KAAwB,gBAAxB,CAEA,OAASC,oBAAT,CAA+BC,aAA/B,KAAoD,wBAApD,C,wFAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,KAAI,CAAGN,WAAW,CAAC,SAACO,KAAD,QAAWA,MAAK,CAACD,IAAN,CAAWA,IAAtB,EAAD,CAAxB,CAEAR,SAAS,CAAC,UAAM,CACdO,QAAQ,CAACH,oBAAoB,CAACI,IAAI,CAACE,SAAN,CAArB,CAAR,CACD,CAFQ,CAEN,CAACH,QAAD,CAFM,CAAT,CAIA,GAAII,QAAO,CAAGT,WAAW,CAAC,SAACO,KAAD,QAAWA,MAAK,CAACG,QAAN,CAAeC,IAA1B,EAAD,CAAzB,CACA,CAACV,OAAO,CAACQ,OAAD,CAAR,EAAqBA,OAAO,CAACG,MAAR,CAAe,SAACC,MAAD,QAAYA,OAAM,CAACC,OAAP,GAAmB,KAA/B,EAAf,CAArB,CAEA,GAAMC,YAAW,0FAAG,iBAAOC,EAAP,wIACZX,SAAQ,CAACF,aAAa,CAACa,EAAD,CAAd,CAAR,CAA4BC,IAA5B,CAAiC,iBACrCZ,SAAQ,CAACH,oBAAoB,CAACI,IAAI,CAACE,SAAN,CAArB,CAD6B,EAAjC,CADY,uDAAH,kBAAXO,YAAW,4CAAjB,CAMA,mBACE,aAAK,SAAS,CAAC,wBAAf,wBACE,yCADF,CAGG,CAACd,OAAO,CAACQ,OAAD,CAAR,cACC,YAAK,SAAS,CAAC,eAAf,UACGA,OAAO,CAACS,GAAR,CAAY,SAACC,IAAD,CAAOC,KAAP,CAAiB,CAC5B,mBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,qCAAiBD,IAAI,CAACE,IAAtB,GADF,cAEE,iCAFF,cAGE,oBAAKF,IAAI,CAACG,UAAV,EAHF,GADF,cAME,YAAK,SAAS,CAAC,qBAAf,uBACE,cACE,IAAI,CAAC,UADP,CAEE,OAAO,CAAEH,IAAI,CAACL,OAFhB,CAGE,OAAO,CAAE,yBAAMC,YAAW,CAACI,IAAI,CAACI,GAAN,CAAjB,EAHX,EADF,EANF,GADF,CAgBD,CAjBA,CADH,EADD,cAsBC,kCACE,iDADF,EAzBJ,GADF,CAgCD,CAjDD,CAmDA,cAAenB,cAAf"},"metadata":{},"sourceType":"module"}