{"ast":null,"code":"import _asyncToGenerator from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/regenerator/index.js\";import{AUTH,LOGOUT,SET_MESSAGE}from\"../constants/reducers\";import*as api from\"../api\";export var signup=function signup(userData,bool){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _error$response2,_error$response2$data,_error$response,_error$response$data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.register(userData).then(function(res){dispatch({type:AUTH,user:res.data});window.location=\"/\";});case 3:_context.next=14;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);if(!(bool===false)){_context.next=12;break;}_context.next=10;return api.login(userData).then(function(res){dispatch({type:AUTH,user:res.data});window.location=\"/\";});case 10:_context.next=13;break;case 12:dispatch({type:SET_MESSAGE,payload:_context.t0===null||_context.t0===void 0?void 0:(_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message});case 13:dispatch({type:SET_MESSAGE,payload:_context.t0===null||_context.t0===void 0?void 0:(_error$response2=_context.t0.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var login=function login(userData,bool){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _error$response3,_error$response3$data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.login(userData).then(function(res){dispatch({type:AUTH,user:res.data});window.location=\"/\";});case 3:_context2.next=13;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);if(!(bool===true)){_context2.next=12;break;}_context2.next=10;return api.register(userData).then(function(res){dispatch({type:AUTH,user:res.data});window.location=\"/\";});case 10:_context2.next=13;break;case 12:dispatch({type:SET_MESSAGE,payload:_context2.t0===null||_context2.t0===void 0?void 0:(_error$response3=_context2.t0.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return api.logout();case 2:dispatch({type:LOGOUT});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["AUTH","LOGOUT","SET_MESSAGE","api","signup","userData","bool","dispatch","register","then","res","type","user","data","window","location","login","payload","response","message","logout"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/actions/auth.js"],"sourcesContent":["import { AUTH, LOGOUT, SET_MESSAGE } from \"../constants/reducers\";\nimport * as api from \"../api\";\n\nexport const signup = (userData, bool) => async (dispatch) => {\n  try {\n    await api.register(userData).then((res) => {\n      dispatch({ type: AUTH, user: res.data });\n      window.location = \"/\";\n    });\n  } catch (error) {\n    if (bool === false) {\n      await api.login(userData).then((res) => {\n        dispatch({ type: AUTH, user: res.data });\n        window.location = \"/\";\n      });\n    } else {\n      dispatch({ type: SET_MESSAGE, payload: error?.response?.data?.message });\n    }\n    dispatch({ type: SET_MESSAGE, payload: error?.response?.data?.message });\n  }\n};\n\nexport const login = (userData, bool) => async (dispatch) => {\n  try {\n    await api.login(userData).then((res) => {\n      dispatch({ type: AUTH, user: res.data });\n      window.location = \"/\";\n    });\n  } catch (error) {\n    if (bool === true) {\n      await api.register(userData).then((res) => {\n        dispatch({ type: AUTH, user: res.data });\n        window.location = \"/\";\n      });\n    } else {\n      dispatch({ type: SET_MESSAGE, payload: error?.response?.data?.message });\n    }\n  }\n};\n\nexport const logout = () => async (dispatch) => {\n  await api.logout();\n  dispatch({ type: LOGOUT });\n};\n"],"mappings":"2QAAA,OAASA,IAAT,CAAeC,MAAf,CAAuBC,WAAvB,KAA0C,uBAA1C,CACA,MAAO,GAAKC,IAAZ,KAAqB,QAArB,CAEA,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAS,CAACC,QAAD,CAAWC,IAAX,iGAAoB,iBAAOC,QAAP,wOAEhCJ,IAAG,CAACK,QAAJ,CAAaH,QAAb,EAAuBI,IAAvB,CAA4B,SAACC,GAAD,CAAS,CACzCH,QAAQ,CAAC,CAAEI,IAAI,CAAEX,IAAR,CAAcY,IAAI,CAAEF,GAAG,CAACG,IAAxB,CAAD,CAAR,CACAC,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CAHK,CAFgC,4FAOlCT,IAAI,GAAK,KAPyB,kDAQ9BH,IAAG,CAACa,KAAJ,CAAUX,QAAV,EAAoBI,IAApB,CAAyB,SAACC,GAAD,CAAS,CACtCH,QAAQ,CAAC,CAAEI,IAAI,CAAEX,IAAR,CAAcY,IAAI,CAAEF,GAAG,CAACG,IAAxB,CAAD,CAAR,CACAC,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CAHK,CAR8B,wCAapCR,QAAQ,CAAC,CAAEI,IAAI,CAAET,WAAR,CAAqBe,OAAO,kEAAE,YAAOC,QAAT,gEAAE,gBAAiBL,IAAnB,+CAAE,qBAAuBM,OAArD,CAAD,CAAR,CAboC,QAetCZ,QAAQ,CAAC,CAAEI,IAAI,CAAET,WAAR,CAAqBe,OAAO,mEAAE,YAAOC,QAAT,kEAAE,iBAAiBL,IAAnB,gDAAE,sBAAuBM,OAArD,CAAD,CAAR,CAfsC,oEAApB,gEAAf,CAmBP,MAAO,IAAMH,MAAK,CAAG,QAARA,MAAQ,CAACX,QAAD,CAAWC,IAAX,kGAAoB,kBAAOC,QAAP,yMAE/BJ,IAAG,CAACa,KAAJ,CAAUX,QAAV,EAAoBI,IAApB,CAAyB,SAACC,GAAD,CAAS,CACtCH,QAAQ,CAAC,CAAEI,IAAI,CAAEX,IAAR,CAAcY,IAAI,CAAEF,GAAG,CAACG,IAAxB,CAAD,CAAR,CACAC,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CAHK,CAF+B,gGAOjCT,IAAI,GAAK,IAPwB,oDAQ7BH,IAAG,CAACK,QAAJ,CAAaH,QAAb,EAAuBI,IAAvB,CAA4B,SAACC,GAAD,CAAS,CACzCH,QAAQ,CAAC,CAAEI,IAAI,CAAEX,IAAR,CAAcY,IAAI,CAAEF,GAAG,CAACG,IAAxB,CAAD,CAAR,CACAC,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CAHK,CAR6B,yCAanCR,QAAQ,CAAC,CAAEI,IAAI,CAAET,WAAR,CAAqBe,OAAO,qEAAE,aAAOC,QAAT,kEAAE,iBAAiBL,IAAnB,gDAAE,sBAAuBM,OAArD,CAAD,CAAR,CAbmC,sEAApB,kEAAd,CAkBP,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAS,mGAAM,kBAAOb,QAAP,6IACpBJ,IAAG,CAACiB,MAAJ,EADoB,QAE1Bb,QAAQ,CAAC,CAAEI,IAAI,CAAEV,MAAR,CAAD,CAAR,CAF0B,wDAAN,kEAAf"},"metadata":{},"sourceType":"module"}