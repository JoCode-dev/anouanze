{"ast":null,"code":"import _slicedToArray from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import GoogleMapReact from\"google-map-react\";import{getNearParoisses}from\"../../actions/paroisse\";import{useDispatch,useSelector}from\"react-redux\";import List from\"./List/List\";import Marker from\"./Marker\";import ParoisseMarker from\"./ParoisseMarker\";import mapStyles from\"./mapStyles\";import{isEmpty}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Map=function Map(){var _paroisses$result$,_paroisses$result$2,_paroisses$result;var _useState=useState(true),_useState2=_slicedToArray(_useState,1),shistApi=_useState2[0];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),userCoords=_useState4[0],setUserCoords=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),coordinates=_useState6[0],setCoordinates=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),onLoading=_useState8[0],setOnLoading=_useState8[1];var coords=\"\";var dispatch=useDispatch();var paroisses=useSelector(function(state){return state.nearParoisses;});var apiKey=shistApi&&\"AIzaSyBwwRjHA3A4j64wjjtRgKfhviBkvz9psYE\";var _useState9=useState({lat:!isEmpty(paroisses)?paroisses===null||paroisses===void 0?void 0:(_paroisses$result$=paroisses.result[0])===null||_paroisses$result$===void 0?void 0:_paroisses$result$.location.coordinates[0]:null,lng:!isEmpty(paroisses)?paroisses===null||paroisses===void 0?void 0:(_paroisses$result$2=paroisses.result[0])===null||_paroisses$result$2===void 0?void 0:_paroisses$result$2.location.coordinates[1]:null}),_useState10=_slicedToArray(_useState9,2),paroisseCoords=_useState10[0],setParoisseCoords=_useState10[1];useEffect(function(){navigator.geolocation.getCurrentPosition(function(_ref){var _ref$coords=_ref.coords,latitude=_ref$coords.latitude,longitude=_ref$coords.longitude;setCoordinates({lat:latitude,lng:longitude});setUserCoords({lat:latitude,lng:longitude});console.log(coordinates);});setTimeout(function(){setOnLoading(false);},3000);},[]);useEffect(function(){// eslint-disable-next-line react-hooks/exhaustive-deps\ncoords=coordinates.lat+\";\"+coordinates.lng;dispatch(getNearParoisses(coords));},[coordinates]);var handleParoisseCoords=function handleParoisseCoords(coords){setParoisseCoords({lat:coords[0],lng:coords[1]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-list-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Pr\\xE8s de Chez vous\"}),!isEmpty(paroisses.result)?/*#__PURE__*/_jsx(List,{paroisses:paroisses.result}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Aucun R\\xE9sultat pour cette zone\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:onLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"lds-ellipsis\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}):/*#__PURE__*/_jsxs(GoogleMapReact,{bootstrapURLKeys:{key:apiKey},defaultCenter:coordinates,center:coordinates,defaultZoom:15,margin:[50,50,50,50],options:{disableDefaultUI:true,zoomControl:true,styles:mapStyles},onChange:function onChange(e){console.log(e);setCoordinates({lat:e.center.lat,lng:e.center.lng});}//onGoogleApiLoaded={({ map, maps }) => apiIsLoaded(map, maps)}\n,yesIWantToUseGoogleMapApiInternals:true,children:[/*#__PURE__*/_jsx(Marker,{lat:userCoords.lat,lng:userCoords.lng}),(_paroisses$result=paroisses.result)===null||_paroisses$result===void 0?void 0:_paroisses$result.map(function(paroisses,idx){return/*#__PURE__*/_jsx(ParoisseMarker,{lat:paroisses.location.coordinates[0],lng:paroisses.location.coordinates[1]},idx);})]})})]});};export default Map;","map":{"version":3,"names":["React","useEffect","useState","GoogleMapReact","getNearParoisses","useDispatch","useSelector","List","Marker","ParoisseMarker","mapStyles","isEmpty","Map","shistApi","userCoords","setUserCoords","coordinates","setCoordinates","onLoading","setOnLoading","coords","dispatch","paroisses","state","nearParoisses","apiKey","lat","result","location","lng","paroisseCoords","setParoisseCoords","navigator","geolocation","getCurrentPosition","latitude","longitude","console","log","setTimeout","handleParoisseCoords","key","disableDefaultUI","zoomControl","styles","e","center","map","idx"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/components/Map/Map.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport GoogleMapReact from \"google-map-react\";\n\nimport { getNearParoisses } from \"../../actions/paroisse\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport List from \"./List/List\";\nimport Marker from \"./Marker\";\nimport ParoisseMarker from \"./ParoisseMarker\";\n\nimport mapStyles from \"./mapStyles\";\n\nimport { isEmpty } from \"../utils\";\n\nconst Map = () => {\n  const [shistApi] = useState(true);\n  const [userCoords, setUserCoords] = useState({});\n  const [coordinates, setCoordinates] = useState({});\n  const [onLoading, setOnLoading] = useState(true);\n  let coords = \"\";\n\n  const dispatch = useDispatch();\n  const paroisses = useSelector((state) => state.nearParoisses);\n  const apiKey = shistApi && \"AIzaSyBwwRjHA3A4j64wjjtRgKfhviBkvz9psYE\";\n\n  const [paroisseCoords, setParoisseCoords] = useState({\n    lat: !isEmpty(paroisses)\n      ? paroisses?.result[0]?.location.coordinates[0]\n      : null,\n    lng: !isEmpty(paroisses)\n      ? paroisses?.result[0]?.location.coordinates[1]\n      : null,\n  });\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(\n      ({ coords: { latitude, longitude } }) => {\n        setCoordinates({ lat: latitude, lng: longitude });\n        setUserCoords({ lat: latitude, lng: longitude });\n        console.log(coordinates);\n      }\n    );\n\n    setTimeout(() => {\n      setOnLoading(false);\n    }, 3000);\n  }, []);\n\n  useEffect(() => {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    coords = coordinates.lat + \";\" + coordinates.lng;\n    dispatch(getNearParoisses(coords));\n  }, [coordinates]);\n\n  const handleParoisseCoords = (coords) => {\n    setParoisseCoords({ lat: coords[0], lng: coords[1] });\n  };\n\n  return (\n    <div className=\"map-container\">\n      <div className=\"map-list-container\">\n        <h1>Près de Chez vous</h1>\n        {!isEmpty(paroisses.result) ? (\n          <List paroisses={paroisses.result} />\n        ) : (\n          <>\n            <h2>Aucun Résultat pour cette zone</h2>{\" \"}\n          </>\n        )}\n      </div>\n      <div className=\"map-container\">\n        {onLoading ? (\n          <div className=\"lds-ellipsis\">\n            <div></div>\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        ) : (\n          <GoogleMapReact\n            bootstrapURLKeys={{ key: apiKey }}\n            defaultCenter={coordinates}\n            center={coordinates}\n            defaultZoom={15}\n            margin={[50, 50, 50, 50]}\n            options={{\n              disableDefaultUI: true,\n              zoomControl: true,\n              styles: mapStyles,\n            }}\n            onChange={(e) => {\n              console.log(e);\n              setCoordinates({ lat: e.center.lat, lng: e.center.lng });\n            }}\n            //onGoogleApiLoaded={({ map, maps }) => apiIsLoaded(map, maps)}\n            yesIWantToUseGoogleMapApiInternals={true}\n          >\n            <Marker lat={userCoords.lat} lng={userCoords.lng} />\n\n            {paroisses.result?.map((paroisses, idx) => (\n              <ParoisseMarker\n                lat={paroisses.location.coordinates[0]}\n                lng={paroisses.location.coordinates[1]}\n                key={idx}\n              />\n            ))}\n          </GoogleMapReact>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}