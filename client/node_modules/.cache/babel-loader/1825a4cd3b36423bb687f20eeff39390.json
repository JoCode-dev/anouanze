{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { useCallback, useEffect, useRef } from 'react';\nimport { UP_KEY, DOWN_KEY, HOME_KEY, END_KEY, ENTER_KEY } from '../../../../libs/constants';\nimport getNewIndex from '../helpers/getNewIndex';\nimport isOptionVisible from '../../../InternalDropdown/helpers/isOptionVisible';\nexport default function useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange) {\n  var activeIndex = useRef(0);\n  var length = list.length;\n  var handleActiveChange = useCallback(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = useCallback(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!isOptionVisible(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = useCallback(function (event) {\n    if ([UP_KEY, DOWN_KEY, ENTER_KEY, HOME_KEY, END_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, _defineProperty(_keyHandlerMap, UP_KEY, function () {\n        return moveToOption(getNewIndex(active - 1, length));\n      }), _defineProperty(_keyHandlerMap, DOWN_KEY, function () {\n        return moveToOption(getNewIndex(active + 1, length));\n      }), _defineProperty(_keyHandlerMap, HOME_KEY, function () {\n        return moveToOption(0);\n      }), _defineProperty(_keyHandlerMap, END_KEY, function () {\n        return moveToOption(length - 1);\n      }), _defineProperty(_keyHandlerMap, ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption]);\n  useEffect(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  useEffect(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  useEffect(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}","map":{"version":3,"names":["_defineProperty","useCallback","useEffect","useRef","UP_KEY","DOWN_KEY","HOME_KEY","END_KEY","ENTER_KEY","getNewIndex","isOptionVisible","useKeyboardNavigation","country","list","ref","scrollableRef","itemsRef","handleCountryChange","activeIndex","length","handleActiveChange","newIndex","currentItem","current","newItem","setAttribute","moveToOption","amount","offsetTop","scrollBy","handleKeyDown","event","indexOf","keyCode","_keyHandlerMap","preventDefault","active","keyHandlerMap","element","window","addEventListener","removeEventListener","scrollTo"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/node_modules/react-rainbow-components/esm/components/PhoneInput/countriesDropdown/hooks/useKeyboardNavigation.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { useCallback, useEffect, useRef } from 'react';\nimport { UP_KEY, DOWN_KEY, HOME_KEY, END_KEY, ENTER_KEY } from '../../../../libs/constants';\nimport getNewIndex from '../helpers/getNewIndex';\nimport isOptionVisible from '../../../InternalDropdown/helpers/isOptionVisible';\nexport default function useKeyboardNavigation(country, list, ref, scrollableRef, itemsRef, handleCountryChange) {\n  var activeIndex = useRef(0);\n  var length = list.length;\n  var handleActiveChange = useCallback(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', false);\n    }\n\n    if (newItem) {\n      itemsRef.current[newIndex].setAttribute('aria-selected', true);\n      activeIndex.current = newIndex;\n    }\n  }, [itemsRef]);\n  var moveToOption = useCallback(function (newIndex) {\n    var currentItem = itemsRef.current[activeIndex.current];\n    var newItem = itemsRef.current[newIndex];\n\n    if (currentItem && newItem) {\n      if (!isOptionVisible(newItem, scrollableRef.current)) {\n        var amount = newItem.offsetTop - currentItem.offsetTop;\n        scrollableRef.current.scrollBy(0, amount);\n      }\n\n      handleActiveChange(newIndex);\n    }\n  }, [handleActiveChange, itemsRef, scrollableRef]);\n  var handleKeyDown = useCallback(function (event) {\n    if ([UP_KEY, DOWN_KEY, ENTER_KEY, HOME_KEY, END_KEY].indexOf(event.keyCode) !== -1) {\n      var _keyHandlerMap;\n\n      event.preventDefault();\n      var active = activeIndex.current;\n      var keyHandlerMap = (_keyHandlerMap = {}, _defineProperty(_keyHandlerMap, UP_KEY, function () {\n        return moveToOption(getNewIndex(active - 1, length));\n      }), _defineProperty(_keyHandlerMap, DOWN_KEY, function () {\n        return moveToOption(getNewIndex(active + 1, length));\n      }), _defineProperty(_keyHandlerMap, HOME_KEY, function () {\n        return moveToOption(0);\n      }), _defineProperty(_keyHandlerMap, END_KEY, function () {\n        return moveToOption(length - 1);\n      }), _defineProperty(_keyHandlerMap, ENTER_KEY, function () {\n        return list[active] && handleCountryChange(list[active]);\n      }), _keyHandlerMap);\n      keyHandlerMap[event.keyCode]();\n    }\n  }, [handleCountryChange, length, list, moveToOption]);\n  useEffect(function () {\n    var element = ref.current || window;\n    element.addEventListener('keydown', handleKeyDown);\n    return function () {\n      element.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown, ref]);\n  useEffect(function () {\n    handleActiveChange(0);\n\n    if (scrollableRef.current && scrollableRef.current.scrollTo) {\n      scrollableRef.current.scrollTo(0, 0);\n    }\n\n    activeIndex.current = 0;\n  }, [country, handleActiveChange, itemsRef, length, scrollableRef]);\n  useEffect(function () {\n    var currentItem = itemsRef.current[activeIndex.current];\n\n    if (currentItem) {\n      currentItem.setAttribute('aria-selected', true);\n    }\n  });\n  return handleActiveChange;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}