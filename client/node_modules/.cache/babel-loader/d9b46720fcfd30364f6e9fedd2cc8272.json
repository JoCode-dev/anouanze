{"ast":null,"code":"import _slicedToArray from\"/Users/jocode/Documents/GitHub/anouanze/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{NavLink}from\"react-router-dom\";import{isEmpty}from\"../components/utils\";import{getAllParoisse}from\"../actions/paroisse\";import Loader from\"../components/Loader/Loader\";import NavBar from\"../components/NavBar/NavBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Paroisses=function Paroisses(){var dispatch=useDispatch();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),onPlaceholder=_useState4[0],setOnPlaceholder=_useState4[1];var _useState5=useState(3),_useState6=_slicedToArray(_useState5,2),count=_useState6[0],setCount=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),paroissesGroupe=_useState8[0],setParoissesGroupe=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),searchText=_useState10[0],setSearchText=_useState10[1];var holder=[1,2,3,4,5,6];var paroisses=useSelector(function(state){return state.paroisses;});var loadMore=function loadMore(){if(window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight){setIsLoading(true);}};useEffect(function(){if(isLoading){dispatch(getAllParoisse(count));setIsLoading(false);setCount(count+4);}window.addEventListener(\"scroll\",loadMore);return function(){return window.removeEventListener(\"scroll\",loadMore);};},[dispatch,isLoading]);useEffect(function(){if(!isEmpty(paroisses)){setIsLoading(false);setParoissesGroupe(paroisses);}setTimeout(function(){setOnPlaceholder(false);},3000);},[paroisses]);var searchParoisse=function searchParoisse(e){setSearchText(e);var regex=new RegExp(\"(?:[^.w]|^|^\\\\W+)\"+e+\"(?:[^.w]|\\\\W(?=\\\\W+|$)|$)\",\"i\");var res=paroisses.filter(function(v){return regex.test(v.name);});setParoissesGroupe(res);};return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NavBar,{value:\"Paroisses\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"paroisses-container\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"paroisses-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Paroisses\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"paroisses-blocks-container\",children:isEmpty(paroisses[0])||onPlaceholder?/*#__PURE__*/_jsx(_Fragment,{children:holder.map(function(holder,idx){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card_load\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_load-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card_load_extreme_title\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card_load_extreme_descripion\"})]})]},idx);})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchText,onChange:function onChange(e){return searchParoisse(e.target.value);},placeholder:\"Chercher une Paroisse...\"})}),paroissesGroupe.map(function(paroisse){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/paroisse/\".concat(paroisse._id),className:\"paroisse-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"paroisse-card-img\",children:[paroisse!==null&&paroisse!==void 0&&paroisse.pictures[0]?/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+paroisse.pictures[0],alt:paroisse.name}):/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/imgs/icon.png\",alt:paroisse.name}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"paroisse-card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"paroisse-card-title\",children:paroisse.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"paroisse-card-descripion\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Province : \",paroisse.province]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Dioc\\xE8se : \",paroisse.diocese]})]})]})]},paroisse._id)});})]})})]})]})});};export default Paroisses;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","NavLink","isEmpty","getAllParoisse","Loader","NavBar","Paroisses","dispatch","isLoading","setIsLoading","onPlaceholder","setOnPlaceholder","count","setCount","paroissesGroupe","setParoissesGroupe","searchText","setSearchText","holder","paroisses","state","loadMore","window","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","addEventListener","removeEventListener","setTimeout","searchParoisse","e","regex","RegExp","res","filter","v","test","name","map","idx","target","value","paroisse","_id","pictures","process","env","PUBLIC_URL","province","diocese"],"sources":["/Users/jocode/Documents/GitHub/anouanze/client/src/pages/Paroisses.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { NavLink } from \"react-router-dom\";\nimport { isEmpty } from \"../components/utils\";\nimport { getAllParoisse } from \"../actions/paroisse\";\nimport Loader from \"../components/Loader/Loader\";\nimport NavBar from \"../components/NavBar/NavBar\";\n\nconst Paroisses = () => {\n  const dispatch = useDispatch();\n  const [isLoading, setIsLoading] = useState(true);\n  const [onPlaceholder, setOnPlaceholder] = useState(true);\n  const [count, setCount] = useState(3);\n  const [paroissesGroupe, setParoissesGroupe] = useState([]);\n  const [searchText, setSearchText] = useState(\"\");\n\n  const holder = [1, 2, 3, 4, 5, 6];\n\n  let paroisses = useSelector((state) => state.paroisses);\n\n  const loadMore = () => {\n    if (\n      window.innerHeight + document.documentElement.scrollTop + 1 >\n      document.scrollingElement.scrollHeight\n    ) {\n      setIsLoading(true);\n    }\n  };\n\n  useEffect(() => {\n    if (isLoading) {\n      dispatch(getAllParoisse(count));\n      setIsLoading(false);\n      setCount(count + 4);\n    }\n\n    window.addEventListener(\"scroll\", loadMore);\n    return () => window.removeEventListener(\"scroll\", loadMore);\n  }, [dispatch, isLoading]);\n\n  useEffect(() => {\n    if (!isEmpty(paroisses)) {\n      setIsLoading(false);\n      setParoissesGroupe(paroisses);\n    }\n    setTimeout(() => {\n      setOnPlaceholder(false);\n    }, 3000);\n  }, [paroisses]);\n\n  const searchParoisse = (e) => {\n    setSearchText(e);\n\n    const regex = new RegExp(\n      \"(?:[^.w]|^|^\\\\W+)\" + e + \"(?:[^.w]|\\\\W(?=\\\\W+|$)|$)\",\n      \"i\"\n    );\n    const res = paroisses.filter((v) => regex.test(v.name));\n\n    setParoissesGroupe(res);\n\n  };\n\n  return (\n    <>\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <>\n          <NavBar value={\"Paroisses\"} />\n          <div className=\"paroisses-container\">\n            <header className=\"paroisses-header\">\n              <h1>Paroisses</h1>\n            </header>\n\n            <div className=\"paroisses-blocks-container\">\n              {isEmpty(paroisses[0]) || onPlaceholder ? (\n                <>\n                  {holder.map((holder, idx) => (\n                    <div className=\"card\" key={idx}>\n                      <div className=\"card_load\"></div>\n                      <div className=\"card_load-content\">\n                        <div className=\"card_load_extreme_title\"></div>\n                        <div className=\"card_load_extreme_descripion\"></div>\n                      </div>\n                    </div>\n                  ))}\n                </>\n              ) : (\n                <>\n                  <div className=\"search-container\">\n                    <input\n                      type=\"text\"\n                      value={searchText}\n                      onChange={(e) => searchParoisse(e.target.value)}\n                      placeholder=\"Chercher une Paroisse...\"\n                    />\n                  </div>\n                  {paroissesGroupe.map((paroisse) => (\n                    <>\n                      <NavLink\n                        to={`/paroisse/${paroisse._id}`}\n                        className=\"paroisse-card\"\n                        key={paroisse._id}\n                      >\n                        <div className=\"paroisse-card-img\">\n                          {paroisse?.pictures[0] ? (\n                            <img\n                              src={\n                                process.env.PUBLIC_URL + paroisse.pictures[0]\n                              }\n                              alt={paroisse.name}\n                            />\n                          ) : (\n                            <img\n                              src={process.env.PUBLIC_URL + \"/imgs/icon.png\"}\n                              alt={paroisse.name}\n                            />\n                          )}{\" \"}\n                        </div>\n                        <div className=\"paroisse-card-content\">\n                          <div className=\"paroisse-card-title\">\n                            {paroisse.name}\n                          </div>\n                          <div className=\"paroisse-card-descripion\">\n                            <div>Province : {paroisse.province}</div>\n                            <div>Dioc√®se : {paroisse.diocese}</div>\n                          </div>\n                        </div>\n                      </NavLink>\n                    </>\n                  ))}\n                </>\n              )}\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Paroisses;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}